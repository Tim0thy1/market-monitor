# market-monitor

# 📊 实时金融市场监控工具

一个集成的实时金融市场监控工具，支持虚拟币、美股行情和财经新闻的实时显示。

## ✨ 功能特性

### 🪙 虚拟币监控
- 实时获取 BTC、ETH、BNB 价格（通过 Gate.io API）
- 支持做多/做空成本计算
- 自动计算盈亏和盈亏百分比
- 每60秒自动刷新

### 📈 美股行情
- 智能识别交易时段（盘前、正常交易、盘后、隔夜）
- 自动获取对应时段的价格和涨跌幅
- 支持股票标记系统（🚀 重点关注、⚡ 特别关注）
- 双列显示，按涨跌幅排序
- 每10分钟自动刷新

### 📰 财经新闻
- 实时获取英文财经新闻
- 自动翻译为中文（带缓存机制）
- 重要新闻标记（🔥 重要、📰 普通）
- 支持显示5条或10条新闻
- 每5分钟自动刷新

## 🚀 快速开始

### 环境要求
```bash
pip install requests pandas yahooquery googletrans==4.0.0rc1 pytz
```

### 配置文件

#### 1. 虚拟币成本配置
在脚本中修改 `costs` 字典：
```python
costs = {
    "BTCUSDT": 0.0,      # 0表示不持仓
    "ETHUSDT": 3811,     # 正数表示做多成本价
    "BNBUSDT": -600      # 负数表示做空成本价
}
```

#### 2. 美股列表配置
创建 `stocks.txt` 文件，格式如下：
```
AAPL 1
TSLA 2
NVDA
MSFT 1
```
- 第一列：股票代码
- 第二列（可选）：1=🚀标记，2=⚡标记

### 运行程序
```bash
python all_with_news.py
```

## 🎮 操作说明

- **Q**: 退出程序
- **W**: 手动刷新所有数据
- **M**: 切换新闻显示数量（5条/10条）

## 📊 显示界面

```
=== 综合行情显示 ===

💰 虚拟币行情（Gate.io）:
BTCUSDT: 43,250.00 | 做多成本 42,000.00 | 盈亏 +1250.00 (+2.98%)
ETHUSDT: 2,580.50 | 做空成本 2,800.00 | 盈亏 +219.50 (+7.84%)
BNBUSDT: 315.20

📊 美股行情（当前时段价格 & 涨跌%）:
Ticker   Last Close Price    Change        Ticker   Last Close Price    Change    
----------------------------------------------------------------------
🚀AAPL     185.25   187.50   +1.21%        ⚡TSLA     245.30   248.90   +1.47%
  NVDA     875.20   882.15   +0.79%          MSFT     378.45   380.20   +0.46%

📰 最新财经新闻（最近5条）:
----------------------------------------------------------------------
14:32 🔥 美联储官员暗示可能在下次会议上降息
14:28 📰 苹果公司发布第四季度财报，营收超预期
14:25 📰 特斯拉宣布在中国新建超级工厂
```

## 🔧 技术特性

### 智能时段识别
程序会自动识别美股交易时段：
- **盘前交易**（4:00-9:30 ET）
- **正常交易**（9:30-16:00 ET）
- **盘后交易**（16:00-20:00 ET）
- **隔夜时段**（20:00-4:00 ET）

### 数据回退机制
当当前时段数据不可用时，会智能回退到其他时段的数据：
- 盘前 → 隔夜 → 收盘 → 盘后
- 正常交易 → 盘前 → 盘后 → 隔夜
- 盘后 → 正常交易 → 盘前 → 隔夜
- 隔夜 → 盘后 → 正常交易 → 盘前

### 新闻翻译缓存
- 使用 pickle 缓存翻译结果
- 避免重复翻译相同新闻
- 提高响应速度，节省API调用

## 📁 文件说明

- `all_with_news.py` - 主程序文件
- `stocks.txt` - 美股监控列表（需手动创建）
- `news_translation_cache.pkl` - 新闻翻译缓存（自动生成）

## ⚠️ 注意事项

1. **网络要求**: 需要稳定的网络连接访问各API
2. **翻译服务**: 使用Google翻译，可能需要科学上网
3. **API限制**: 请合理使用，避免频繁请求被限制
4. **数据准确性**: 仅供参考，投资决策请以官方数据为准

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目！

## 📄 许可证

MIT License

---

⚠️ **免责声明**: 本工具仅用于信息展示，不构成投资建议。投资有风险，决策需谨慎。
